# img2gco

[English](README.md)

bitmap画像をgcodeに変換します

元ソース https://github.com/nebarnix/img2gco

元wiki http://wiki.nebarnix.com/wiki/Img2gco 

Todo:

- [ ] 相対座標を使用する。位置調整がやりやすくなる
- [ ] 双方向（往復）加工　現在は一方向のみ
- [ ] 加工の前後に実行するgcodeのヘッダ、フッタを指定できるように
- [ ] アルファチャンネルのハンドリング向上。現在はアルファチャンネルが０の画素は黒として扱われる。これが気に入らないなら、アルファチャネルのない（すべての画素値が指定されている）状態にする必要がある
- [ ] パラメータを反映したプレビュー

パラメータの説明:

- Laser On Command: - レーザー出力をonにするコマンド ( e.g. M3 )
- Laser Off Command: - レーザー出力をoffにするコマンド ( e.g. M5 )
- PWM Control: - PWMパラメータを指定するのに使うコマンド。Laser On Commandの後に指定するか、M106を使って指定するかを選択。
- M106 Option: - PWMの値を指定する際、M106に必要な追加オプションを指定（必要なら）。例えば、M106 P1 S15のように指定する必要があるなら、P1を入れる

- Laser Min Power [0-255]: - 白に相当するレーザー出力値
- Laser Max Power [0-255]: - 黒に相当するレーザー出力値
- Laser 'Off' Power [0-255]: - レーザーを出力しない、もしくはワークを焦がさない（無加工）レーザー出力値。白をオフセットしているのでなければ白のレーザー出力値と同じでよい。
- 白と扱う画素値 [0-255]: これを上回る値は白として扱われる。JPEGの場合は、 圧縮に伴うゴミが入ることがあるため、252程度、もしくは適した値にする。PNGの場合は255か、254程度でもよい。
- Travel (noncutting) Rate [mm/min]:" - 加工をしないエリアでの移動速度
- Scan (cutting) Rate [mm/min]: - 加工をする際の移動速度。これはファームウェアごとで処理できる時間当たりのコマンド数で制約を受ける。一般的にはUSBよりSDカードを使ってgcodeを実行するほうが早くできる。この値はレーザーの出力レベルとあわせて調整が必要となる。つまり早く動かしたければ同じ”焦げ”を得るにはより強いレーザー出力値が必要になる
- Overscan Distance (prevents twang from showing) [mm]: - これは画像の外周に、捨て動作を行うエリアを表す。例えば移動の切り返しの際ベルトの振動がある場合にはこれを指定すると実際の加工エリアではベルト振動が収まっていることが期待できる。
- Flip Image Upside Down: - 画像の右上がgcodeの原点(0,0)となってほしい場合はチェックする。逆に左下が原点となってほしい場合はチェックを外す。
- Height (width autocalculated) [mm]: - 画像の高さを指定する。
- Horizontal Resolution [mm/pixel]: - 一X方向の画素間の距離を示す。大きい値にすれば加工速度は速くなるが画素の間が空いてしまう（加工されない）0.1で十分な品質が得られる。0.15でもそれに近い品質になる。0.2あたりから品質はやや落ち始める。それ以上だと粒状感を感じるだろう。
- Scangap [mm/line]: - レーザーのY方向の走査間隔を表す。この値を十分小さくすれば未加工の”線”は見えなくなる。（ここからはオリジナルの記述そのまま。私のレーザー加工機では0.05だが、、通常は0.075を使用している。これは加工速度が速くなるためである。0.1では未加工のラインが見えてしまうが、時には良い効果をもたらすこともなる。レーザーの焦点をずらしワークに当たるビームの太さを太くすることで加工時間を早くすることもできる。しかしその場合はレーザー出力を上げる必要がある。もし走査線が重なってしまう場合は少々出力を下げる必要があるかもしれない）
- Start X [mm from 0 for right of image]: - 画像のX方向の開始位置。ワーク上のこの座標から正の方向に画像を走査する。ここが原点となる。画像の原点位置は上記のFlip Image Upside Downで決まる。
- Start Y [mm from 0 for top of image]: - 画像のY方向の開始位置。ワーク上のこの座標から正の方向に画像を走査する。ここが原点となる。画像の原点位置は上記のFlip Image Upside Downで決まる。